/**
 * @author codingsamuel
 * @version 1.0.0
 * @license MIT
 * @copyright codingsamuel 2019
 */
"use strict";function _instanceof(e,a){return null!=a&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](e):e instanceof a}function _classCallCheck(e,a){if(!_instanceof(e,a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,a){for(var t=0;t<a.length;t++){var o=a[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,a,t){return a&&_defineProperties(e.prototype,a),t&&_defineProperties(e,t),e}var LwcLazyLoader=function(){function e(a,t){_classCallCheck(this,e),this._wrapper=a,this._selector=t}return _createClass(e,[{key:"_between",value:function(e,a,t){return e>a&&e<t}},{key:"getWrapper",value:function(){return this._wrapper}},{key:"getSelector",value:function(){return this._selector}},{key:"getElements",value:function(){return this.getWrapper().find(this.getSelector())}},{key:"setScrollTop",value:function(e){this._scrollTop=e}},{key:"getScrollTop",value:function(){return this._scrollTop}},{key:"elementsToLoad",value:function(){var e=this,a=this.getElements(),t=[];return a.each(function(a,o){var n=$(o),l=n.offset().top,r=e.getScrollTop(),d=window.innerHeight,c=l-d,s=l+d;e._between(r,c,s)&&t.push(n)}),t}},{key:"rndId",value:function(e){for(var a="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}},{key:"loadElements",value:function(e,a){for(var t=this,o=function(o){var n=e[o],l=n.attr(a.dataLoadedSelector),r=n.attr(a.dataSrc);if("loaded"!=l&&"loading"!=l){if("true"==n.attr(a.dataIsCSS)){var d=t.rndId(5);n.append('<img id="lwcLazyLoader'.concat(d,'" src="" style="display:none;">')),$("#lwcLazyLoader".concat(d)).attr("src",r).on("load",function(e){e.currentTarget.remove(),n.css("background-image","url(".concat(r,")")),a.onElementLoaded&&a.onElementLoaded.call(t,n),n.attr(a.dataLoadedSelector,"loaded")})}else n.attr("src",r).on("load",function(e){a.onElementLoaded&&a.onElementLoaded.call(t,n),n.attr(a.dataLoadedSelector,"loaded")});n.attr(a.dataLoadedSelector,"loading"),a.onElementLoad&&a.onElementLoad.call(t,n)}},n=0;n<e.length;n++)o(n)}}]),e}();$.fn.lwcLazyLoad=function(e){e||(e={});var a=new LwcLazyLoader(this,e.selector||"img");$(document).ready(function(){a.setScrollTop($(document).scrollTop());var t=a.elementsToLoad();a.loadElements(t,{dataSrc:e.dataSelector||"data-lazyload",dataLoadedSelector:e.dataLoadedSelector||"data-lazyloaded",dataIsCSS:e.dataCSSSelector||"data-lazyload-css",onElementLoad:e.onElementLoad,onElementLoaded:e.onElementLoaded})}),$(window).scroll(function(t){a.setScrollTop($(document).scrollTop());var o=a.elementsToLoad();a.loadElements(o,{dataSrc:e.dataSelector||"data-lazyload",dataLoadedSelector:e.dataLoadedSelector||"data-lazyloaded",dataIsCSS:e.dataCSSSelector||"data-lazyload-css",onElementLoad:e.onElementLoad,onElementLoaded:e.onElementLoaded})})};